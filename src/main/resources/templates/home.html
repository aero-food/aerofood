<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <title>Aero Food | Home</title>
    <th:block th:replace="fragments/header :: main-header"/>
</head>
<body>
<!--Nav bar-->
<div th:if="${#authorization.expression('isAuthenticated()')}">
    <th:block th:if="not ${#authentication.principal.isAdmin}">
        <div th:replace="fragments/navbar :: main-navbar"></div>
    </th:block>
    <th:block th:if="${#authentication.principal.isAdmin}">
        <div th:replace="fragments/navbar-admin :: main-navbar"></div>
    </th:block>
</div>
<div th:if="not ${#authorization.expression('isAuthenticated()')}">
        <div th:replace="fragments/navbar :: main-navbar"></div>
</div>


<section class="container">
<!--    <th:block th:if="not ${#authentication.principal.isAdmin}">-->
    <div class="card">
        <h3>Still getting your food yourself?</h3>
        <form action="/register" method="GET">
            <button id="reg" class="btn btn-primary" type="submit">Register</button>
        </form>
        <h4>Already a user?</h4>
        <form action="/login" method="GET">
            <button id="login" class="btn btn-primary" type="submit">Login</button>
        </form>
    </div>
    </th:block>
    <div th:sec:authorize="${#authorization.expression('isAuthenticated()')}" class="card">
        <h3 th:sec:authorize="${#authorization.expression('isAuthenticated()')}"> Welcome, <span sec:authentication="name"></span></h3>

        <div>
            <span th:text="${#authentication.principal.isAdmin}"></span>
        </div>

        <div>
            <span th:text="${#authentication.principal.email}"></span>
        </div>
        <div>
            <span th:text="${#authentication.principal.username}"></span>
        </div>
        <div>
            <span th:text="${#authentication.principal.phone_number}"></span>
        </div>


        <h4>See Whats Available</h4>
        <form action="/search" method="GET">
            <button class="btn btn-primary" type="submit">Search</button>
        </form>
    </div>


</section>

<div th:replace="fragments/footer :: main-footer"></div>

</body>
</html>